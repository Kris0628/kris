<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å……é›»ç«™åŠ ç›Ÿåˆ†æ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Chart.js CDN for drawing charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <!-- Chart.js DataLabels Plugin CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <style>
        /* Custom font for traditional Chinese and Inter for English, ensuring proper display */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #000; /* ç´”é»‘èƒŒæ™¯ */
            color: #fff; /* ç™½è‰²æ–‡å­— */
            overflow-x: hidden; /* é˜²æ­¢æ°´å¹³æ»¾å‹• */
        }

        /* Classes for Apple-like scroll animation effect */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Base styles for Bento Grid items */
        .bento-item {
            background-color: rgba(255, 255, 255, 0.05); /* è¼•å¾®é€æ˜èƒŒæ™¯ */
            border: 1px solid rgba(255, 255, 255, 0.1); /* æ·ºè‰²é‚Šæ¡† */
            border-radius: 2rem; /* å¤§åœ“è§’ */
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px); /* è¼•å¾®æ¨¡ç³Šæ•ˆæœ */
            -webkit-backdrop-filter: blur(5px); /* Safari æ”¯æ´ */
        }

        /* Highlight gradient effects */
        .highlight-gradient-emerald {
            background: linear-gradient(135deg, rgba(52, 211, 153, 0.2) 0%, rgba(52, 211, 153, 0) 100%); /* ç¥–æ¯ç¶ æ¼¸å±¤ */
        }
        .highlight-gradient-cyan {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.2) 0%, rgba(6, 182, 212, 0) 100%); /* é’è‰²æ¼¸å±¤ */
        }
        .highlight-gradient-purple {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(168, 85, 247, 0) 100%); /* ç´«è‰²æ¼¸å±¤ */
        }

        /* Ensure each "page" section takes full viewport height and width */
        .full-page-section {
            width: 100vw;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 4rem 2rem;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 768px) {
            .full-page-section {
                padding: 2rem 1rem;
            }
            /* Adjusted font sizes for smaller screens */
            .text-7xl { font-size: 3rem; } /* Reduced from 3.5rem */
            .text-6xl { font-size: 2.5rem; } /* Reduced from 3rem */
            .text-5xl { font-size: 2rem; } /* Reduced from 2.5rem */
            .text-4xl { font-size: 1.75rem; } /* Reduced from 2rem */
            .text-3xl { font-size: 1.5rem; } /* Reduced from 1.75rem */
            .text-2xl { font-size: 1.25rem; } /* Reduced from 1.5rem */
            .bento-grid {
                grid-template-columns: 1fr;
            }
            .bento-item {
                padding: 1.5rem;
            }
            /* Ensure text-left for mobile collapsible items */
            .text-left-mobile {
                text-align: left;
            }
        }

        /* Styles for interactive collapsible content */
        .collapsible-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, opacity 0.5s ease-out;
            opacity: 0;
            width: 100%;
        }

        .collapsible-content.expanded {
            max-height: 1000px; /* è¶³å¤ å¤§çš„å€¼ä»¥åŒ…å«å…§å®¹ */
            opacity: 1;
            padding-top: 1rem;
        }

        .collapsible-header .icon {
            transition: transform 0.3s ease-out;
        }

        .collapsible-header.expanded .icon {
            transform: rotate(90deg); /* å±•é–‹æ™‚æ—‹è½‰åœ–ç¤º */
        }

        /* Styles for the new dropdown and image area */
        .charger-select {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            color: #fff;
            font-size: 1.125rem;
            margin-bottom: 2rem;
            appearance: none; /* ç§»é™¤é»˜èªä¸‹æ‹‰ç®­é ­ */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.5em;
            cursor: pointer;
        }
        .charger-select option {
            background-color: #1a202c; /* é¸é …çš„æ·±è‰²èƒŒæ™¯ */
            color: #fff;
        }
        .charger-image {
            max-width: 100%; /* éŸ¿æ‡‰å¼åœ–åƒå¤§å°ï¼Œä½”å…¶å®¹å™¨çš„å…¨éƒ¨å¯¬åº¦ */
            height: auto;
            border-radius: 1rem;
            border: 2px solid rgba(52, 211, 153, 0.5);
            box-shadow: 0 0 20px rgba(52, 211, 153, 0.3);
            transition: transform 0.3s ease-out;
        }
        .charger-image:hover {
            transform: scale(1.02);
        }

        /* Adjust list item alignment within collapsible content */
        .collapsible-content ul {
            text-align: left; /* ç¢ºä¿åˆ—è¡¨é …ç›®å·¦å°é½Š */
            margin-left: auto; /* åœ¨è¼ƒå¤§è¢å¹•ä¸Šå°‡åˆ—è¡¨ç½®ä¸­ */
            margin-right: auto;
            max-width: 90%; /* èª¿æ•´å¯¬åº¦ä»¥æé«˜å¯è®€æ€§ */
        }

        /* Specific styles for the new flow chart */
        .flow-node {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 0.5rem; /* Reduced padding */
            border-radius: 9999px; /* Fully rounded */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            flex-shrink: 0;
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem;
            min-width: 8rem; /* Smallest fixed width */
            max-width: 10rem; /* Max width to prevent overstretching */
            height: 8rem; /* Fixed height for consistency */
            md:min-width: 10rem;
            md:height: 10rem;
        }

        .flow-node i {
            font-size: 2.25rem; /* text-4xl */
            margin-bottom: 0.5rem;
        }

        .flow-text {
            font-size: 0.75rem; /* text-xs */
            line-height: 1rem;
            font-weight: 300; /* font-light */
            color: #d1d5db; /* gray-300 */
        }
        .flow-text-bold {
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem;
            font-weight: 700; /* font-bold */
            color: #fff; /* white */
        }

        /* Arrows styling */
        .flow-arrow {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1; /* Allows arrows to take available space */
            text-align: center;
            margin: 0 0.5rem; /* Adjust horizontal margin */
        }

        .flow-arrow i {
            font-size: 1.5rem; /* text-2xl */
            margin: 0.25rem 0; /* Vertical margin for arrows */
        }
        .flow-arrow span {
            font-size: 0.75rem; /* text-xs */
            line-height: 1rem;
            color: #cbd5e1; /* slate-300 */
            text-wrap: wrap; /* Allow text to wrap */
            max-width: 6rem; /* Limit width for text in arrows */
            padding: 0 0.25rem; /* Small horizontal padding */
        }

        /* Specific colors for flow nodes */
        .node-investor { background-color: #6d28d9; /* purple-700 */ }
        /* Removed .node-franchisee as it's no longer a distinct node */
        .node-star-charger { background-color: #1f2937; /* gray-800 */ border: 2px solid #34d399; /* emerald-400 */ }
        .node-charging-station { background-color: #06b6d4; /* cyan-600 */ }
        .node-ev-owner { background-color: #2563eb; /* blue-600 */ }

        /* Calculator specific styles */
        #page-revenue-calculator .bg-white {
            background-color: #fff;
            color: #000; /* Ensure text within calculator is dark on white background */
        }
        #page-revenue-calculator label {
            color: #374151; /* gray-700 */
        }
        #page-revenue-calculator .text-red-600 {
            color: #dc2626;
        }
        #page-revenue-calculator .text-green-600 {
            color: #16a34a;
        }
        #page-revenue-calculator .text-blue-700 {
            color: #1d4ed8;
        }
        #admin-details-section {
            display: none; /* Initially hidden */
        }
        #chart-container {
            margin-top: 2rem;
            padding: 1rem;
            background-color: rgba(0, 0, 0, 0.8); /* Dark background for chart */
            border-radius: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            opacity: 0; /* Changed from display: none */
            pointer-events: none; /* Disable interaction when hidden */
            transition: opacity 0.5s ease-out; /* Smooth transition */
            height: 500px; /* Increased fixed height for the chart container */
        }
        #chart-container.visible {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>
<body class="bg-black text-white">

    <section id="page-title" class="full-page-section bg-gradient-to-br from-black to-gray-900">
        <div class="animate-on-scroll flex flex-col items-center justify-center">
            <h1 class="text-6xl md:text-7xl lg:text-8xl font-extrabold text-emerald-400 leading-tight mb-4 drop-shadow-lg">
                å……é›»ç«™(æ¨)æŠ•è³‡åŠ ç›Ÿåˆ†æ
            </h1>
            <p class="text-xl md:text-2xl lg:text-3xl text-gray-300 font-light tracking-wide">
                Charging Station (Pile) Investment and Franchise Analysis
            </p>
        </div>
    </section>

    <section id="page-summary" class="full-page-section bg-black">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-emerald">
            <h2 class="text-6xl md:text-7xl font-extrabold text-emerald-400 mb-8">ç¸½è¦½</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 bento-grid">
                <div class="bento-item col-span-1 highlight-gradient-cyan">
                    <i class="fas fa-car-battery text-5xl text-cyan-400 mb-4"></i>
                    <h3 class="text-3xl font-bold mb-2">é›»å‹•è»Šå¸‚å ´çˆ†ç‚¸æ€§æˆé•·</h3>
                    <p class="text-lg text-gray-200">å…¨çƒèˆ‡å°ç£é›»å‹•è»ŠéŠ·é‡å‡å‘ˆç¾å¼·å‹å¢é•·ï¼Œæ”¿ç­–æ”¯æŒèˆ‡æŠ€è¡“é€²æ­¥æ˜¯ä¸»è¦é©…å‹•åŠ›ã€‚</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-purple">
                    <i class="fas fa-charging-station text-5xl text-purple-400 mb-4"></i>
                    <h3 class="text-3xl font-bold mb-2">å……é›»åŸºç¤è¨­æ–½éœ€æ±‚è¿«åˆ‡</h3>
                    <p class="text-lg text-gray-200">éš¨è‘—é›»å‹•è»Šæ•¸é‡å¢åŠ ï¼Œå……é›»æ¨ç¼ºå£æ—¥ç›Šé¡¯è‘—ï¼ŒæŠ•è³‡æ½›åŠ›å·¨å¤§ã€‚</p>
                </div>
                <div class="bento-item col-span-full highlight-gradient-emerald">
                    <i class="fas fa-chart-line text-5xl text-emerald-400 mb-4"></i>
                    <h3 class="text-3xl font-bold mb-2">æŠ•è³‡è©•ä¼°è¦é»</h3>
                    <p class="text-lg text-gray-200">åœ°é»ã€è¨­å‚™ã€è«‹é›»&å»ºç½®æˆæœ¬ã€ç›ˆåˆ©æ¨¡å¼ã€æ³•è¦éƒ½æ˜¯é—œéµè€ƒé‡ï¼ŒåŠ ç›Ÿå¯å¤§å¤§é™ä½æŠ•è³‡é–€æª»ã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <section id="page-global-growth" class="full-page-section bg-black">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-cyan">
            <h2 class="text-6xl md:text-7xl font-extrabold text-cyan-400 mb-8">å…¨çƒå¸‚å ´æ¦‚æ³</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 bento-grid">
                <div class="bento-item col-span-1 highlight-gradient-emerald">
                    <div class="text-7xl font-extrabold text-emerald-400 mb-2 animated-number" data-target-value="1700" data-unit="è¬">
                        <span class="current-value">0</span><span class="text-2xl md:text-3xl">è¬</span>
                    </div>
                    <p class="text-xl text-gray-200">2024å¹´å…¨çƒé›»å‹•è»ŠéŠ·é‡/è¼›</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-purple">
                    <div class="text-7xl font-extrabold text-purple-400 mb-2">20%</div>
                    <p class="text-xl text-gray-200">é›»å‹•è»Šåœ¨å…¨çƒå¸‚ä½”ç‡</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-cyan">
                    <div class="text-7xl font-extrabold text-cyan-400 mb-2">26%</div>
                    <p class="text-xl text-gray-200">å¹´å¢é•·ç‡ (vs. 2023)</p>
                </div>
                <div class="bento-item col-span-full highlight-gradient-emerald">
                    <h3 class="text-4xl font-bold mb-4 text-emerald-400">ä¸»è¦å› ç´ </h3>
                    <ul class="list-disc list-inside w-full max-w-md mx-auto text-left">
                        <li>æ”¿åºœæ”¿ç­–æ¨å‹•</li>
                        <li>åš´æ ¼ç‡ƒæ²¹è»Šæ’æ”¾æ¨™æº–</li>
                        <li>é›»æ± æŠ€è¡“é€²æ­¥</li>
                        <li>æ¶ˆè²»è€…ç’°ä¿æ„è­˜æå‡</li>
                        <li>æ›´å¤šè»Šå» æŠ•å…¥</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section id="page-taiwan-growth" class="full-page-section bg-black">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-purple">
            <h2 class="text-6xl md:text-7xl font-extrabold text-purple-400 mb-8">å°ç£å¸‚å ´ç¾æ³</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 bento-grid">
                <div class="bento-item col-span-1 highlight-gradient-cyan">
                    <div class="text-7xl font-extrabold text-cyan-400 mb-2 animated-number" data-target-value="9.8" data-unit="è¬">
                        <span class="current-value">0</span><span class="text-2xl md:text-3xl">è¬</span>
                    </div>
                    <p class="text-xl text-gray-200">2024å¹´å°ç£é›»å‹•è»Šæ›ç‰Œæ•¸/è¼›</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-purple">
                    <div class="text-7xl font-extrabold text-purple-400 mb-2">8.3%</div>
                    <p class="text-xl text-gray-200">å¸‚å ´ä½”æœ‰ç‡</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-emerald">
                    <div class="text-7xl font-extrabold text-emerald-400 mb-2">63.9%</div>
                    <p class="text-xl text-gray-200">å¹´å¢é•·ç‡ (vs. 2023)</p>
                </div>
                
                <div class="bento-item col-span-full highlight-gradient-cyan">
                    <h3 class="text-4xl font-bold mb-4 text-cyan-400">ä¸»è¦å› ç´ </h3>
                    <ul class="list-disc list-inside w-full max-w-md mx-auto text-left">
                        <li>åœ‹ç”¢é›»å‹•è»Š n7 ä¸Šå¸‚é€ æˆçˆ†ç™¼æ€§æˆé•·</li>
                        <li>Tesla æŒçºŒä¸»å° + åƒ¹æ ¼èª¿æ•´ç­–ç•¥</li>
                        <li>æ”¿åºœæ”¿ç­–èˆ‡è£œåŠ©æ”¯æŒ</li>
                        <li>å……é›»åŸºç¤è¨­æ–½é€æ­¥æ“´å¢</li>
                        <li>ç¯€èƒ½ç’°ä¿æ„è­˜æå‡ + ç‡ƒæ²¹è»Šæˆæœ¬å‡é«˜</li>
                        <li>æ¶ˆè²»è€…é¸æ“‡è®Šå¤šã€æ¥å—åº¦æé«˜</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section id="page-investment-demand" class="full-page-section bg-black">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-emerald">
            <h2 class="text-6xl md:text-7xl font-extrabold text-emerald-400 mb-8">æŠ•è³‡åŠ ç›Ÿå¯è¡Œæ€§åˆ†æ</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 bento-grid">
                <div class="bento-item col-span-1 highlight-gradient-cyan">
                    <i class="fas fa-map-marked-alt text-5xl text-cyan-400 mb-4"></i>
                    <h3 class="text-3xl font-bold mb-2">å¸‚å ´éœ€æ±‚èˆ‡æ½›åŠ›</h3>
                    <p class="text-lg text-gray-200">è§£æ±ºé‡Œç¨‹ç„¦æ…®ã€å…¬å…±å……é›»æ¨ç¼ºå£ã€å¤šæ¨£åŒ–å ´æ™¯éœ€æ±‚ã€‚</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-purple">
                    <i class="fas fa-handshake text-5xl text-purple-400 mb-4"></i>
                    <h3 class="text-3xl font-bold mb-2">æŠ•è³‡æ¨¡å¼</h3>
                    <p class="text-lg text-gray-200">è‡ªè¡Œå»ºç½®èˆ‡ç‡Ÿé‹ã€åŠ ç›Ÿç¾æœ‰å“ç‰Œã€èˆ‡å ´åœ°ä¸»åˆä½œã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <section id="page-investment-factors" class="full-page-section bg-black">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-cyan">
            <h2 class="text-6xl md:text-7xl font-extrabold text-cyan-400 mb-8">æŠ•è³‡è€ƒé‡å› ç´ </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 bento-grid">
                <div class="bento-item col-span-1 highlight-gradient-emerald">
                    <i class="fas fa-map-marker-alt text-4xl text-emerald-400 mb-2"></i>
                    <h4 class="text-2xl font-bold">åœ°é»é¸æ“‡</h4>
                    <p class="text-md text-gray-200">è»Šæµé‡ã€é›»åŠ›å®¹é‡ã€åœè»Šä¾¿åˆ©æ€§ã€å‘¨é‚Šè¨­æ–½ã€‚</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-purple">
                    <i class="fas fa-tools text-4xl text-purple-400 mb-2"></i>
                    <h4 class="text-2xl font-bold">è¨­å‚™é¸æ“‡</h4>
                    <p class="text-md text-gray-200">æ…¢å……/å¿«å……ã€å……é›»è¦æ ¼ã€å¯é æ€§èˆ‡ç¶­è­·ã€‚</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-cyan">
                    <i class="fas fa-money-bill-wave text-4xl text-cyan-400 mb-2"></i>
                    <h4 class="text-2xl font-bold">ç‡Ÿé‹æˆæœ¬</h4>
                    <p class="text-md text-gray-200">é›»è²»ã€ç¶­è­·è²»ã€ç§Ÿé‡‘ã€è»Ÿé«”å¹³å°è²»ã€ä¿éšªã€‚</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-emerald">
                    <i class="fas fa-dollar-sign text-4xl text-emerald-400 mb-2"></i>
                    <h4 class="text-2xl font-bold">ç›ˆåˆ©æ¨¡å¼</h4>
                    <p class="text-md text-gray-200">å……é›»æœå‹™è²»ã€åœè»Šè²»ã€å»£å‘Šæ”¶å…¥ã€æœƒå“¡åˆ¶ã€‚</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-purple">
                    <i class="fas fa-balance-scale text-4xl text-purple-400 mb-2"></i>
                    <h4 class="text-2xl font-bold">æ”¿åºœè£œåŠ©èˆ‡æ³•è¦</h4>
                    <p class="text-md text-gray-200">å»ºç½®è£œåŠ©ã€åœè»Šå ´æ³•ã€é›»æ¥­æ³•ã€æ¶ˆé˜²å®‰å…¨ã€‚</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-cyan">
                    <i class="fas fa-users text-4xl text-cyan-400 mb-2"></i>
                    <h4 class="text-2xl font-bold">ç«¶çˆ­æ…‹å‹¢èˆ‡æŠ€è¡“ç™¼å±•</h4>
                    <p class="text-md text-gray-200">å‘¨é‚Šç«¶çˆ­ã€å·®ç•°åŒ–ã€å……é›»æŠ€è¡“æ¼”é€²ã€æ™ºæ…§é›»ç¶²ã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <section id="page-future-challenges" class="full-page-section bg-black">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-purple">
            <h2 class="text-6xl md:text-7xl font-extrabold text-purple-400 mb-8">æœªä¾†å±•æœ›èˆ‡æŒ‘æˆ°</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 bento-grid">
                <div class="bento-item col-span-1 highlight-gradient-emerald">
                    <i class="fas fa-lightbulb text-5xl text-emerald-400 mb-4"></i>
                    <h3 class="text-3xl font-bold mb-2">å±•æœ›</h3>
                    <p class="text-lg text-gray-200">å¸‚å ´æŒçºŒæ“´å¤§ã€æŠ€è¡“æ•´åˆ (V2G)ã€æœå‹™å¤šå…ƒåŒ–ã€‚</p>
                </div>
                <div class="bento-item col-span-1 highlight-gradient-cyan">
                    <i class="fas fa-exclamation-triangle text-5xl text-cyan-400 mb-4"></i>
                    <h3 class="text-3xl font-bold mb-2">æŒ‘æˆ°</h3>
                    <p class="text-lg text-gray-200">é›»ç¶²è² è·(æ˜¯å¦æœ‰é¥‹ç·š?)ã€åœŸåœ°ä¾†æºèˆ‡å–å¾—æˆæœ¬ã€å……é›»æŠ•è³‡å›å ±é€±æœŸé•·ã€é›»å‹•è»Šé‡é«”æˆé•·ç‡ã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <section id="page-conclusion" class="full-page-section bg-black">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-emerald">
            <h2 class="text-6xl md:text-7xl font-extrabold text-emerald-400 mb-8">çµè«–</h2>
            <div class="text-xl text-gray-200 leading-relaxed space-y-4">
                <p>å……é›»æ¨å¸‚å ´å—é›»å‹•è»Šæˆé•·å¸¶å‹•ï¼Œåœ¨å°ç£ä»å…·ç™¼å±•æ½›åŠ›ã€‚</p>
                <p>æŠ•è³‡å‰æ‡‰è©•ä¼°åœ°é»ã€æˆæœ¬ã€æ³•è¦èˆ‡åŒæ¥­ç«¶çˆ­å°æ‰‹ï¼ŒåŠ ç›Ÿå¯é™ä½é–€æª»ä½†é ˆæ…é¸å“ç‰Œã€‚</p>
                <p>æŠ•è³‡å…·æœ‰å‰æ™¯çš„é•·æœŸæ©Ÿæœƒã€‚</p>
                <p>æŒçºŒé—œæ³¨æ”¿ç­–èˆ‡ç”¢æ¥­å‹•å‘ï¼Œä¸¦è«®è©¢å°ˆæ¥­æ„è¦‹ã€‚</p>
            </div>
        </div>
    </section>

    <section id="page-actions" class="full-page-section bg-black min-h-screen">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-cyan">
            <h2 class="text-6xl md:text-7xl font-extrabold text-cyan-400 mb-8">å……é›»æŠ•è³‡è©•ä¼°äº”å¤§é‡é»</h2>

            <div class="bento-item highlight-gradient-emerald mb-8 text-left-mobile w-full">
                <div class="collapsible-header">
                    <div class="flex items-center">
                        <i class="fas fa-search-location text-5xl text-emerald-400 mr-4"></i>
                        <h3 class="text-3xl font-bold text-emerald-300">1. åœ°é»è©•ä¼°</h3>
                    </div>
                    <i class="fas fa-chevron-right text-3xl text-gray-400 icon"></i>
                </div>
                <div class="collapsible-content">
                    <div class="space-y-4 text-lg text-gray-200 w-full px-4">
                        <p class="font-semibold text-emerald-300">ç¯©é¸æ½›åŠ›å€åŸŸï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>ä¾æ“šé›»å‹•è»Šç†±å€èˆ‡å¸¸ç”¨è·¯ç·šåŠå…¶æ•¸æ“šè©•ä¼°æ‰€é¸å ´å€ã€‚</li>
                        </ul>
                        <p class="font-semibold text-emerald-300">ç¾å ´èˆ‡é›»åŠ›è©•ä¼°ï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>å‹˜æŸ¥è»Šæµã€åœè»Šä½ï¼Œç¢ºèªé›»åŠ›ä¾›æ‡‰èˆ‡å¿«å……å¯è¡Œæ€§ã€‚</li>
                        </ul>
                        <p class="font-semibold text-emerald-300">ç«¶çˆ­èˆ‡å‘¨é‚Šç’°å¢ƒï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>äº†è§£å‘¨é‚Šç«¶çˆ­æƒ…æ³ï¼Œä¸¦è©•ä¼°é¤é£²ã€ä¼‘æ¯ç­‰åŠ å€¼æœå‹™ã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bento-item highlight-gradient-purple mb-8 text-left-mobile w-full">
                <div class="collapsible-header">
                    <div class="flex items-center">
                        <i class="fas fa-handshake text-5xl text-purple-400 mr-4"></i>
                        <h3 class="text-3xl font-bold text-purple-300">2. åŠ ç›Ÿå“ç‰Œ</h3>
                    </div>
                    <i class="fas fa-chevron-right text-3xl text-gray-400 icon"></i>
                </div>
                <div class="collapsible-content">
                    <div class="space-y-4 text-lg text-gray-200 w-full px-4">
                        <p class="font-semibold text-purple-300">å“ç‰Œï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>æ˜ŸèˆŸå¿«å……æ“æœ‰å®Œå–„çš„å»ºç½®åŠè»Ÿé«”å¾Œå°èƒ½åŠ›ã€‚</li>
                        </ul>
                        <p class="font-semibold text-purple-300">æ–¹æ¡ˆï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>è©•ä¼°åŠ ç›Ÿé‡‘ã€åˆ†æ½¤ã€æ”¯æ´æœå‹™èˆ‡åˆç´„æ¢æ¬¾ã€‚</li>
                        </ul>
                        <p class="font-semibold text-purple-300">è©•åƒ¹ï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>æ¯”è¼ƒå¸‚å ç‡ã€App æ“ä½œé«”é©—ã€è»Šä¸»è©•åƒ¹ã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bento-item highlight-gradient-cyan mb-8 text-left-mobile w-full">
                <div class="collapsible-header">
                    <div class="flex items-center">
                        <i class="fas fa-calculator text-5xl text-cyan-400 mr-4"></i>
                        <h3 class="text-3xl font-bold text-cyan-300">3. è²¡å‹™æ¨¡å‹å»ºæ§‹</h3>
                    </div>
                    <i class="fas fa-chevron-right text-3xl text-gray-400 icon"></i>
                </div>
                <div class="collapsible-content">
                    <div class="space-y-4 text-lg text-gray-200 w-full px-4">
                        <p class="font-semibold text-cyan-300">æˆæœ¬é ç®—ï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>åˆ—å‡ºåˆæœŸè¨­å‚™èˆ‡ç‡Ÿé‹æˆæœ¬ã€‚</li>
                        </ul>
                        <p class="font-semibold text-cyan-300">æ”¶å…¥ä¾†æºï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>åŒ…æ‹¬å……é›»è²»ã€å»£å‘Šã€åœè»Šèˆ‡æœƒå“¡åˆ¶ã€‚</li>
                        </ul>
                        <p class="font-semibold text-cyan-300">è²¡å‹™æŒ‡æ¨™ï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>è¨ˆç®—æç›Šå¹³è¡¡é»ã€å›æ”¶æœŸã€IRRã€NPVï¼Œé€²è¡Œæ•æ„Ÿåº¦åˆ†æã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bento-item highlight-gradient-emerald mb-8 text-left-mobile w-full">
                <div class="collapsible-header">
                    <div class="flex items-center">
                        <i class="fas fa-gavel text-5xl text-emerald-400 mr-4"></i>
                        <h3 class="text-3xl font-bold text-emerald-300">4. æ³•è¦èˆ‡è£œåŠ©</h3>
                    </div>
                    <i class="fas fa-chevron-right text-3xl text-gray-400 icon"></i>
                </div>
                <div class="collapsible-content">
                    <div class="space-y-4 text-lg text-gray-200 w-full px-4">
                        <p class="font-semibold text-emerald-300">ä¸­å¤®æ”¿ç­–ï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>ç¬¦åˆèƒ½æºç½²èˆ‡ç¶“æ¿Ÿéƒ¨è£œåŠ©åŠè¦ç¯„ï¼ˆå¦‚ã€Šé›»æ¥­æ³•ã€‹ã€ã€Šåœè»Šå ´æ³•ã€‹ï¼‰ã€‚</li>
                        </ul>
                        <p class="font-semibold text-emerald-300">åœ°æ–¹æ”¿åºœï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>ç¢ºèªå»ºç¯‰æ³•è¦ã€æ¶ˆé˜²ã€åœŸåœ°ä½¿ç”¨ç­‰ã€‚</li>
                        </ul>
                        <p class="font-semibold text-emerald-300">æ¶ˆé˜²è¦ç¯„ï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>æ¶ˆé˜²ç›¸é—œï¼Œè¦åŠƒæ‡‰è®Šæ–¹æ¡ˆã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bento-item highlight-gradient-purple mb-8 text-left-mobile w-full">
                <div class="collapsible-header">
                    <div class="flex items-center">
                        <i class="fas fa-users-cog text-5xl text-purple-400 mr-4"></i>
                        <h3 class="text-3xl font-bold text-purple-300">5. å°ˆæ¥­é¡§å•å”åŠ©</h3>
                    </div>
                    <i class="fas fa-chevron-right text-3xl text-gray-400 icon"></i>
                </div>
                <div class="collapsible-content">
                    <div class="space-y-4 text-lg text-gray-200 w-full px-4">
                        <p class="font-semibold text-purple-300">ç”¢æ¥­è³‡è¨Šï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>æä¾›ç”¢æ¥­è¶¨å‹¢èˆ‡æŠ€è¡“å»ºè­°ã€‚</li>
                        </ul>
                        <p class="font-semibold text-purple-300">åˆç´„ç›¸é—œï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>å¯©é–±åˆç´„ã€è™•ç†æ³•éµäº‹å‹™ã€‚</li>
                        </ul>
                        <p class="font-semibold text-purple-300">è²¡å‹™ç›¸é—œï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>ç¢ºç«‹è²¡å‹™(é‡‘æµç›¸é—œ)èˆ‡ç¨…å‹™ã€‚</li>
                        </ul>
                        <p class="font-semibold text-purple-300">é›»æ©Ÿ/å·¥ç¨‹é¡§å•ï¼š</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>è¨­è¨ˆèˆ‡å¯©æ ¸é›»åŠ›ç³»çµ±(è«‹é›»)èˆ‡å·¥ç¨‹å®‰å…¨ã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="page-charger-diagrams" class="full-page-section bg-black">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-cyan">
            <h2 class="text-6xl md:text-7xl font-extrabold text-cyan-400 mb-8">å……é›»æ¨è¨­å‚™ç°¡ä»‹</h2>
            <div class="flex flex-col items-center w-full max-w-4xl mx-auto">
                <label for="charger-type" class="text-2xl font-bold mb-4 text-gray-200">é¸æ“‡å……é›»æ¨åŠŸç‡:</label>
                <select id="charger-type" class="charger-select w-full md:w-3/4">
                    <option value="7kW">7kW</option>
                    <option value="30kW">30kW</option>
                    <option value="120kW">120kW</option>
                    <option value="180kW">180kW</option>
                    <option value="360kW">360kW</option>
                </select>
                <div class="mt-8 w-full flex justify-center">
                    <img id="charger-image" src="https://i.meee.com.tw/lImWom7.jpg" alt="7kW å……é›»æ¨è¨­å‚™åœ–" class="charger-image">
                </div>
            </div>
        </div>
    </section>

    <section id="page-franchise-flow" class="full-page-section bg-black">
        <div class="animate-on-scroll max-w-6xl mx-auto p-8 rounded-3xl highlight-gradient-purple">
            <h2 class="text-6xl md:text-7xl font-extrabold text-purple-400 mb-8">åŠ ç›Ÿæ–¹æ¡ˆæµç¨‹</h2>

            <div class="flex flex-col md:flex-row items-center justify-center w-full max-w-full mx-auto space-y-4 md:space-y-0 md:space-x-2">

                <div class="flow-node node-investor">
                    <i class="fas fa-building text-purple-200"></i>
                    <p class="flow-text-bold text-purple-200">æŠ•è³‡æ–¹</p>
                    <p class="flow-text text-purple-200">(åœ°ä¸»/ä¼æ¥­/ç¤¾å€)</p>
                </div>

                <div class="flow-arrow text-yellow-500">
                    <span class="text-yellow-300">è³‡é‡‘èˆ‡å ´åœ°</span>
                    <i class="fas fa-arrow-right"></i>
                    <i class="fas fa-arrow-left"></i>
                    <span class="text-yellow-300">ç‡Ÿæ”¶èˆ‡æœå‹™å›é¥‹</span>
                </div>

                <div class="flow-node node-star-charger">
                    <p class="flow-text-bold text-emerald-400">æ˜ŸèˆŸå¿«å……</p>
                    <p class="flow-text text-gray-400">STAR CHARGER</p>
                    <p class="flow-text text-gray-500 mt-1">ï¼ˆå«èªè­‰å» å•†èˆ‡å¹³å°ï¼‰</p> </div>

                <div class="flow-arrow text-blue-400">
                    <span class="text-blue-300">è¦åŠƒã€å»ºç½®èˆ‡ç¶­è­·</span>
                    <i class="fas fa-arrow-right"></i>
                </div>

                <div class="flow-node node-charging-station">
                    <i class="fas fa-charging-station text-cyan-200"></i>
                    <p class="flow-text-bold text-cyan-200">å……é›»ç«™</p>
                </div>

                <div class="flow-arrow text-green-400">
                    <span class="text-green-300">æä¾›å……é›»æœå‹™</span>
                    <i class="fas fa-arrow-right"></i>
                    <i class="fas fa-arrow-left"></i>
                    <span class="text-green-300">æ”¯ä»˜å……é›»è²»ç”¨</span>
                </div>

                <div class="flow-node node-ev-owner">
                    <i class="fas fa-car-side text-blue-200"></i>
                    <p class="flow-text-bold text-blue-200">å……é›»è»Šä¸»</p>
                </div>
            </div>

            <div class="mt-12 text-center text-gray-400 text-sm space-y-2">
                <p>æ­¤æµç¨‹åœ–æ¦‚æ‹¬äº†æ˜ŸèˆŸå¿«å……ç”Ÿæ…‹ç³»çš„é‹ä½œæ¨¡å¼ï¼Œä»¥åŠåŠ ç›Ÿæ–¹æ¡ˆçš„ä¸»è¦äº’å‹•é—œä¿‚ï¼š</p>
                <ul class="list-disc list-inside mx-auto max-w-3xl text-left">
                    <li><strong class="text-purple-400">æŠ•è³‡æ–¹ (åœ°ä¸»/ä¼æ¥­/ç¤¾å€)</strong> æä¾›**è³‡é‡‘èˆ‡å ´åœ°**çµ¦<strong class="text-emerald-400">æ˜ŸèˆŸå¿«å…… (å«èªè­‰å» å•†èˆ‡å¹³å°)</strong>ï¼Œä¸¦å¾æ˜ŸèˆŸå¿«å……è™•ç²å¾—**ç‡Ÿæ”¶èˆ‡æœå‹™å›é¥‹**ã€‚</li>
                    <li><strong class="text-emerald-400">æ˜ŸèˆŸå¿«å…… (å«èªè­‰å» å•†èˆ‡å¹³å°)</strong> è² è²¬<strong class="text-cyan-400">å……é›»ç«™</strong>çš„**è¦åŠƒã€å»ºç½®èˆ‡ç¶­è­·**ã€‚</li>
                    <li><strong class="text-cyan-400">å……é›»ç«™</strong>å‘<strong class="text-blue-400">å……é›»è»Šä¸»</strong>**æä¾›å……é›»æœå‹™**ã€‚</li>
                    <li><strong class="text-blue-400">å……é›»è»Šä¸»**æ”¯ä»˜**å……é›»è²»ç”¨**çµ¦<strong class="text-cyan-400">å……é›»ç«™**ã€‚</li>
                    <li>æ•´å€‹ç³»çµ±å½¢æˆä¸€å€‹è³‡é‡‘èˆ‡æœå‹™çš„è‰¯æ€§å¾ªç’°ï¼Œæ¨å‹•æ°¸çºŒç‡Ÿé‹èˆ‡å……é›»ç¶²çµ¡æ“´å¼µã€‚</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Page: Charging Station Revenue Estimation Calculator -->
    <section id="page-revenue-calculator" class="full-page-section bg-black">
        <div class="animate-on-scroll bg-white p-8 rounded-xl shadow-lg w-full max-w-3xl"> <!-- Changed max-w-md to max-w-3xl -->
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">å……é›»ç«™ç‡Ÿæ”¶é ä¼°è©¦ç®—</h2>

            <!-- å……é›»åŠŸç‡ (ä¿ç•™åœ¨é ‚éƒ¨) -->
            <div class="mb-4">
                <label for="calc-powerConsumption" class="block text-gray-700 text-sm font-medium mb-2">å……é›»åŠŸç‡ï¼ˆkWï¼‰ï¼š</label>
                <select id="calc-powerConsumption" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800">
                    <option value="7">7 kW</option>
                    <option value="30" selected>30 kW</option>
                    <option value="120">120 kW</option>
                    <option value="180">180 kW</option>
                    <option value="360">360 kW</option>
                </select>
            </div>

            <div class="mb-4">
                <label for="calc-slots" class="block text-gray-700 text-sm font-medium mb-2">è»Šæ ¼æ•¸ / æ ¼ï¼š</label>
                <input type="number" id="calc-slots" value="2" min="1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800" />
            </div>

            <div class="mb-4">
                <label for="calc-years" class="block text-gray-700 text-sm font-medium mb-2">ç‡Ÿé‹å¹´æœŸï¼ˆå¹´ï¼‰ï¼š</label>
                <input type="number" id="calc-years" value="10" min="1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800" />
            </div>

            <button onclick="calculateRevenue()" class="w-full bg-blue-600 text-white p-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 ease-in-out shadow-md">
                è¨ˆç®—é ä¼°ç‡Ÿæ”¶
            </button>

            <div id="calc-result" class="mt-8 p-6 bg-blue-50 rounded-lg border border-blue-200 text-gray-800 text-lg leading-relaxed hidden">
                <!-- çµæœå°‡é¡¯ç¤ºåœ¨é€™è£¡ -->
            </div>

            <!-- Chart Container -->
            <div id="chart-container" class="w-full" style="height: 500px;"> <!-- Increased height for the chart container -->
                <canvas id="revenueChart"></canvas>
            </div>

            <hr class="my-6 border-gray-300" />

            <h4 class="text-xl font-bold text-gray-800 mb-4 text-center">ğŸ” ç®¡ç†å“¡ç™»å…¥</h4>
            <div class="mb-4">
                <label for="adminPass" class="block text-gray-700 text-sm font-medium mb-2">è¼¸å…¥ç®¡ç†å¯†ç¢¼ï¼š</label>
                <input type="password" id="adminPass" placeholder="è¼¸å…¥å¯†ç¢¼" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800" />
            </div>
            <button onclick="loginAdmin()" class="w-full bg-green-600 text-white p-3 rounded-lg font-semibold hover:bg-green-700 transition duration-300 ease-in-out shadow-md">
                ç™»å…¥
            </button>
            <p id="login-status" class="mt-3 text-sm text-center"></p>

            <div id="admin-details-section" class="mt-8 p-6 bg-yellow-50 rounded-lg border border-yellow-200 text-gray-800 text-sm leading-relaxed">
                <h4 class="text-lg font-bold text-gray-700 mb-3">ç®¡ç†å“¡æ¨¡å¼ - è©³ç´°è¨ˆç®—å…¬å¼èˆ‡åƒæ•¸è¨­å®š</h4>

                <!-- ç§»å…¥ç®¡ç†å“¡æ¨¡å¼çš„è¼¸å…¥æ¬„ä½ -->
                <div class="mb-4">
                    <label for="calc-dailyVehicleCountPerSlot" class="block text-gray-700 text-sm font-medium mb-2">æ¯æ—¥è»Šæ¬¡ / æ ¼ï¼š</label>
                    <input type="number" id="calc-dailyVehicleCountPerSlot" value="5" min="1" step="1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800" />
                </div>

                <div class="mb-4">
                    <label for="calc-averageKWHPerVehicleCharge" class="block text-gray-700 text-sm font-medium mb-2">æ¯è»Šå¹³å‡å……é›»åº¦æ•¸ï¼ˆåº¦/æ¬¡ï¼‰ï¼š</label>
                    <input type="number" id="calc-averageKWHPerVehicleCharge" value="30" min="1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800" />
                </div>

                <div class="mb-4">
                    <label for="calc-chargingRate" class="block text-gray-700 text-sm font-medium mb-2">æ¯åº¦é›»è²»ç‡ï¼ˆNTD/åº¦ï¼‰ï¼š</label>
                    <input type="number" id="calc-chargingRate" value="9" min="0.1" step="0.1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800" />
                </div>

                <div class="mb-4">
                    <label for="calc-electricityCost" class="block text-gray-700 text-sm font-medium mb-2">å°é›»æˆæœ¬ï¼ˆNTD/åº¦ï¼‰ï¼š</label>
                    <input type="number" id="calc-electricityCost" value="4.0" min="0" step="0.1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800" />
                </div>

                <!-- æ–°å¢é›»å‹•è»Šå……é›»å¹´å¢ç‡è¼¸å…¥æ¬„ä½ -->
                <div class="mb-4">
                    <label for="calc-annualGrowthRate" class="block text-gray-700 text-sm font-medium mb-2">é›»å‹•è»Šå……é›»å¹´å¢ç‡ï¼ˆ%ï¼‰ï¼š</label>
                    <input type="number" id="calc-annualGrowthRate" value="10" min="0" step="1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800" />
                </div>

                <!-- æ–°å¢æŠ•è³‡æˆæœ¬è¼¸å…¥æ¬„ä½ -->
                <div class="mb-6">
                    <label for="calc-investmentCostPerKW" class="block text-gray-700 text-sm font-medium mb-2">æ¯ KW æŠ•è³‡æˆæœ¬ï¼ˆNTD/kWï¼‰ï¼š</label>
                    <input type="number" id="calc-investmentCostPerKW" value="12000" min="0" step="1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800" />
                </div>

                <h5 class="text-md font-bold text-gray-700 mb-2 mt-4">è¨ˆç®—ç´°é …ï¼š</h5>
                <p><strong>å°é›»æˆæœ¬ï¼š</strong> <span id="admin-electricity-cost"></span> NTD/åº¦</p>
                <p><strong>æ¯åº¦é›»æ·¨åˆ©æ½¤ï¼šï¼š</strong> <span id="admin-net-profit"></span> NTD/åº¦ (è¨ˆç®—ï¼šè²»ç‡ - é›»æˆæœ¬)</p>
                <p><strong>æ¯æ—¥ç¸½å……é›»åº¦æ•¸ / æ ¼ï¼šï¼š</strong> <span id="admin-daily-kwh-per-slot"></span> åº¦/æ ¼ (è¨ˆç®—ï¼šæ¯æ—¥è»Šæ¬¡/æ ¼ Ã— æ¯è»Šå¹³å‡å……é›»åº¦æ•¸)</p>
                <p><strong>æ¯å€‹è»Šæ ¼æ¯æ—¥æ·¨ç‡Ÿæ”¶ï¼šï¼š</strong> <span id="admin-daily-net-revenue-per-slot"></span> NTD/æ ¼ (è¨ˆç®—ï¼šæ¯æ—¥ç¸½å……é›»åº¦æ•¸/æ ¼ Ã— æ¯åº¦é›»æ·¨åˆ©æ½¤)</p>
                <p><strong>ç¸½æ¯æ—¥æ·¨ç‡Ÿæ”¶ï¼šï¼š</strong> <span id="admin-total-daily-net-revenue"></span> NTD (è¨ˆç®—ï¼šæ¯å€‹è»Šæ ¼æ¯æ—¥æ·¨ç‡Ÿæ”¶ Ã— è»Šæ ¼æ•¸)</p>
                <p><strong>ç¸½æ¯å¹´æ·¨ç‡Ÿæ”¶ (ç¬¬ä¸€å¹´)ï¼šï¼š</strong> <span id="admin-total-annual-net-revenue"></span> NTD (è¨ˆç®—ï¼šç¸½æ¯æ—¥æ·¨ç‡Ÿæ”¶ Ã— 365å¤©)</p>
                <p><strong>ç¸½ç‡Ÿé‹å¹´æœŸæ·¨ç‡Ÿæ”¶ï¼šï¼š</strong> <span id="admin-total-projected-revenue"></span> NTD (è¨ˆç®—ï¼šç¸½æ¯å¹´æ·¨ç‡Ÿæ”¶ Ã— ç‡Ÿé‹å¹´æœŸï¼Œè€ƒæ…®å¹´å¢ç‡)</p>
                <p class="mt-4"><strong>ç¸½æŠ•è³‡æˆæœ¬é‡‘é¡ï¼šï¼š</strong> <span id="admin-total-investment-cost"></span> NTD</p>
                <p class="text-xs text-gray-600">
                    (è¨ˆç®—ï¼š<span id="admin-investment-formula"></span>)
                </p>
            </div>
        </div>
    </section>

    <script>
        let isAdmin = false; // ç®¡ç†å“¡ç™»å…¥ç‹€æ…‹
        let revenueChartInstance = null; // ç”¨æ–¼å„²å­˜ Chart.js å¯¦ä¾‹

        // Register Chart.js DataLabels plugin globally
        Chart.register(ChartDataLabels);

        /**
         * è¼‰å…¥ç®¡ç†å“¡åƒæ•¸é è¨­å€¼æˆ–å„²å­˜çš„å€¼ã€‚
         * å¾ localStorage è®€å–å€¼ï¼Œå¦‚æœæ²’æœ‰å‰‡ä½¿ç”¨ HTML ä¸­è¨­å®šçš„é è¨­å€¼ã€‚
         */
        function loadAdminParameters() {
            // Define default values if not in localStorage or initial HTML
            const defaultValues = {
                dailyVehicleCount: 5,
                averageKWH: 30,
                chargingRate: 9,
                electricityCost: 4.0,
                annualGrowthRate: 10, // æ–°å¢å¹´å¢ç‡é è¨­å€¼
                investmentCostPerKW: 12000
            };

            // ä½¿ç”¨èˆ‡ HTML ID åŒ¹é…çš„éµå
            document.getElementById('calc-dailyVehicleCountPerSlot').value = localStorage.getItem('calc-dailyVehicleCountPerSlot') || defaultValues.dailyVehicleCount;
            document.getElementById('calc-averageKWHPerVehicleCharge').value = localStorage.getItem('calc-averageKWHPerVehicleCharge') || defaultValues.averageKWH;
            document.getElementById('calc-chargingRate').value = localStorage.getItem('calc-chargingRate') || defaultValues.chargingRate;
            document.getElementById('calc-electricityCost').value = localStorage.getItem('calc-electricityCost') || defaultValues.electricityCost;
            document.getElementById('calc-annualGrowthRate').value = localStorage.getItem('calc-annualGrowthRate') || defaultValues.annualGrowthRate; // è¼‰å…¥å¹´å¢ç‡
            document.getElementById('calc-investmentCostPerKW').value = localStorage.getItem('calc-investmentCostPerKW') || defaultValues.investmentCostPerKW;
        }

        /**
         * å„²å­˜ç®¡ç†å“¡åƒæ•¸å€¼åˆ° localStorageã€‚
         */
        function saveAdminParameters() {
            // ä½¿ç”¨èˆ‡ HTML ID åŒ¹é…çš„éµå
            localStorage.setItem('calc-dailyVehicleCountPerSlot', document.getElementById('calc-dailyVehicleCountPerSlot').value);
            localStorage.setItem('calc-averageKWHPerVehicleCharge', document.getElementById('calc-averageKWHPerVehicleCharge').value);
            localStorage.setItem('calc-chargingRate', document.getElementById('calc-chargingRate').value);
            localStorage.setItem('calc-electricityCost', document.getElementById('calc-electricityCost').value);
            localStorage.setItem('calc-annualGrowthRate', document.getElementById('calc-annualGrowthRate').value); // å„²å­˜å¹´å¢ç‡
            localStorage.setItem('calc-investmentCostPerKW', document.getElementById('calc-investmentCostPerKW').value);
        }

        /**
         * æ ¹æ“šç®¡ç†å“¡ç‹€æ…‹è¨­å®šè¼¸å…¥æ¬„ä½çš„å•Ÿç”¨/ç¦ç”¨ç‹€æ…‹å’Œè¦–è¦ºæ•ˆæœã€‚
         */
        function setAdminInputStates() {
            const adminInputs = [
                document.getElementById('calc-dailyVehicleCountPerSlot'),
                document.getElementById('calc-averageKWHPerVehicleCharge'),
                document.getElementById('calc-chargingRate'),
                document.getElementById('calc-electricityCost'),
                document.getElementById('calc-annualGrowthRate'), // æ–°å¢å¹´å¢ç‡åˆ°ç®¡ç†å“¡è¼¸å…¥åˆ—è¡¨
                document.getElementById('calc-investmentCostPerKW')
            ];

            adminInputs.forEach(input => {
                input.disabled = !isAdmin;
                if (isAdmin) {
                    input.classList.remove('bg-gray-200');
                    input.classList.add('focus:ring-blue-500');
                } else {
                    input.classList.add('bg-gray-200');
                    input.classList.remove('focus:ring-blue-500');
                }
            });

            // Specific logic for chargingRate and dailyVehicleCountPerSlot
            updateChargingRateBasedOnPower();
            updateDailyVehicleCountBasedOnPower();
        }

        /**
         * åŸ·è¡Œå……é›»ç«™ç‡Ÿæ”¶é ä¼°è¨ˆç®—ã€‚
         * æ ¹æ“šè¼¸å…¥çš„è»Šæ ¼æ•¸ã€ç‡Ÿé‹å¹´æœŸã€æ¯æ—¥è»Šæ¬¡/æ ¼ã€æ¯è»Šå¹³å‡å……é›»åº¦æ•¸ã€å……é›»åŠŸç‡ã€æ¯åº¦é›»è²»ç‡å’Œå°é›»æˆæœ¬ï¼Œ
         * è¨ˆç®—æ¯æ—¥ã€æ¯å¹´åŠç¸½ç‡Ÿé‹æœŸé–“çš„é ä¼°æ·¨ç‡Ÿæ”¶ã€‚ä¸¦åŠ å…¥æŠ•è³‡æˆæœ¬çš„è¨ˆç®—ã€‚
         */
        window.calculateRevenue = function() {
            console.log("calculateRevenue called.");
            // ç²å–ä½¿ç”¨è€…è¼¸å…¥çš„å€¼ (ä¾†è‡ªå…¬å…±å€å¡Šå’Œç®¡ç†å“¡å€å¡Š)
            const slots = parseInt(document.getElementById('calc-slots').value);
            const years = parseInt(document.getElementById('calc-years').value);
            const dailyVehicleCountPerSlot = parseInt(document.getElementById('calc-dailyVehicleCountPerSlot').value);
            const averageKWHPerVehicleCharge = parseInt(document.getElementById('calc-averageKWHPerVehicleCharge').value);
            const chargingRatePerKWH = parseFloat(document.getElementById('calc-chargingRate').value);
            const electricityCostPerKWH = parseFloat(document.getElementById('calc-electricityCost').value);
            const annualGrowthRate = parseFloat(document.getElementById('calc-annualGrowthRate').value) / 100; // è½‰æ›ç‚ºå°æ•¸
            const investmentCostPerKW = parseFloat(document.getElementById('calc-investmentCostPerKW').value);

            const averagePowerConsumptionKW = parseFloat(document.getElementById('calc-powerConsumption').value);

            const resultDiv = document.getElementById('calc-result');
            const adminDetailsSection = document.getElementById('admin-details-section');
            const chartContainer = document.getElementById('chart-container');

            // é©—è­‰è¼¸å…¥æ˜¯å¦ç‚ºæœ‰æ•ˆæ•¸å­—ä¸”å¤§æ–¼0 (æˆæœ¬å¯ä»¥ç‚º0)
            if (isNaN(slots) || slots <= 0 ||
                isNaN(years) || years <= 0 ||
                isNaN(dailyVehicleCountPerSlot) || dailyVehicleCountPerSlot <= 0 ||
                isNaN(averageKWHPerVehicleCharge) || averageKWHPerVehicleCharge <= 0 ||
                isNaN(chargingRatePerKWH) || chargingRatePerKWH <= 0 ||
                isNaN(electricityCostPerKWH) || electricityCostPerKWH < 0 ||
                isNaN(annualGrowthRate) || annualGrowthRate < 0 || // å¹´å¢ç‡å¯ä»¥ç‚º0
                isNaN(investmentCostPerKW) || investmentCostPerKW < 0)
            {
                resultDiv.innerHTML = '<p class="text-red-600 font-semibold">è«‹è¼¸å…¥æœ‰æ•ˆçš„æ•¸å€¼ (æ‰€æœ‰æ¬„ä½é™¤äº†å°é›»æˆæœ¬å’ŒæŠ•è³‡æˆæœ¬ï¼Œå…¶é¤˜å¿…é ˆç‚ºæ­£æ•¸)ã€‚</p>';
                resultDiv.classList.remove('hidden');
                chartContainer.classList.remove('visible'); // Hide chart on error
                if (isAdmin) adminDetailsSection.style.display = 'block'; // ä¿æŒé¡¯ç¤ºç®¡ç†å“¡è©³æƒ…ä»¥ä¾¿ä¿®æ”¹éŒ¯èª¤
                console.log("Input validation failed.");
                return;
            }

            // é©—è­‰è»Šæ ¼æ•¸é™åˆ¶ï¼š30kW ä»¥ä¸Šçš„åŠŸç‡ï¼Œè»Šæ ¼æ•¸å¿…é ˆæ˜¯å¶æ•¸ä¸”è‡³å°‘ç‚º 2
            if (averagePowerConsumptionKW > 30) {
                if (slots < 2 || slots % 2 !== 0) {
                    resultDiv.innerHTML = '<p class="text-red-600 font-semibold">éŒ¯èª¤ï¼šç•¶å……é›»åŠŸç‡ç‚º 30kW ä»¥ä¸Šæ™‚ï¼Œè»Šæ ¼æ•¸å¿…é ˆæ˜¯å¶æ•¸ä¸”è‡³å°‘ç‚º 2 æ ¼ã€‚</p>';
                    resultDiv.classList.remove('hidden');
                    chartContainer.classList.remove('visible'); // Hide chart on error
                    if (isAdmin) adminDetailsSection.style.display = 'block'; // ä¿æŒé¡¯ç¤ºç®¡ç†å“¡è©³æƒ…ä»¥ä¾¿ä¿®æ”¹éŒ¯èª¤
                    console.log("Slot count validation failed for high power.");
                    return;
                }
            }

            // å®šç¾©é ä¼°è¨ˆç®—æ‰€éœ€çš„å¸¸æ•¸
            const operationDaysPerYear = 365;

            // æ­¥é©Ÿ 1: è¨ˆç®—æ¯åº¦é›»çš„æ·¨åˆ©æ½¤
            const netProfitPerKWH = chargingRatePerKWH - electricityCostPerKWH;

            // å¦‚æœæ·¨åˆ©æ½¤ç‚ºè² ï¼Œé¡¯ç¤ºè­¦å‘Š
            if (netProfitPerKWH < 0) {
                resultDiv.innerHTML = '<p class="text-red-600 font-semibold">è­¦å‘Šï¼šæ‚¨çš„æ¯åº¦é›»è²»ç‡ä½æ–¼å°é›»æˆæœ¬ï¼Œå°‡å°è‡´è™§æï¼</p>';
                resultDiv.classList.remove('hidden');
                chartContainer.classList.remove('visible'); // Hide chart on error
                if (isAdmin) adminDetailsSection.style.display = 'block'; // ä¿æŒé¡¯ç¤ºç®¡ç†å“¡è©³æƒ…ä»¥ä¾¿ä¿®æ”¹éŒ¯èª¤
                console.log("Negative net profit warning.");
                return;
            }

            // æ­¥é©Ÿ 2: è¨ˆç®—æ¯å€‹è»Šæ ¼æ¯æ—¥çš„ç¸½å……é›»åº¦æ•¸
            const totalDailyKWHPerSlot = dailyVehicleCountPerSlot * averageKWHPerVehicleCharge;

            // æ­¥é©Ÿ 3: è¨ˆç®—æ¯å€‹è»Šæ ¼æ¯æ—¥çš„æ·¨ç‡Ÿæ”¶
            const dailyNetRevenuePerSlot = totalDailyKWHPerSlot * netProfitPerKWH;

            // æ­¥é©Ÿ 4: è¨ˆç®—ç¸½æ¯æ—¥æ·¨ç‡Ÿæ”¶ (æ‰€æœ‰è»Šæ ¼)
            let initialTotalDailyNetRevenue = dailyNetRevenuePerSlot * slots;

            // æ­¥é©Ÿ 5: è¨ˆç®—ç¸½æ¯å¹´æ·¨ç‡Ÿæ”¶ (ç¬¬ä¸€å¹´)
            let initialTotalAnnualNetRevenue = initialTotalDailyNetRevenue * operationDaysPerYear;

            // æ­¥é©Ÿ 6: è¨ˆç®—ç¸½ç‡Ÿé‹æœŸé–“çš„é ä¼°æ·¨ç‡Ÿæ”¶ (è€ƒæ…®å¹´å¢ç‡)
            let totalProjectedRevenue = 0;
            const annualRevenuesForChart = []; // For cumulative revenue
            const annualNetRevenuesPerYearForChart = []; // For annual revenue line

            let currentAnnualRevenue = initialTotalAnnualNetRevenue;
            for (let i = 0; i < years; i++) {
                if (i > 0) {
                    currentAnnualRevenue *= (1 + annualGrowthRate);
                }
                totalProjectedRevenue += currentAnnualRevenue;
                annualRevenuesForChart.push(totalProjectedRevenue); // Cumulative
                annualNetRevenuesPerYearForChart.push(currentAnnualRevenue); // Annual for line
            }

            // æ­¥é©Ÿ 7: è¨ˆç®—æŠ•è³‡æˆæœ¬é‡‘é¡
            let totalInvestmentCost = 0;
            let investmentFormulaText = "";

            if (averagePowerConsumptionKW <= 30) { // 7kW æˆ– 30kW
                totalInvestmentCost = averagePowerConsumptionKW * slots * investmentCostPerKW;
                investmentFormulaText = `${averagePowerConsumptionKW} kW Ã— ${slots} æ ¼ Ã— ${investmentCostPerKW} NTD/kW`;
            } else { // 120kW, 180kW, 360kW
                totalInvestmentCost = averagePowerConsumptionKW * (slots / 2) * investmentCostPerKW;
                investmentFormulaText = `${averagePowerConsumptionKW} kW Ã— (${slots} æ ¼ / 2) Ã— ${investmentCostPerKW} NTD/kW`;
            }

            // å„²å­˜æœ€æ–°çš„ç®¡ç†å“¡åƒæ•¸å€¼ (åªæœ‰åœ¨æ‰€æœ‰é©—è­‰é€šéå¾Œæ‰å„²å­˜)
            saveAdminParameters();

            // Helper function to format currency based on value (for display in resultDiv)
            function formatCurrencyForDisplay(value) {
                // Round to nearest integer before checking magnitude
                const roundedValue = Math.round(value);
                if (Math.abs(roundedValue) >= 10000) { // If absolute value is 10,000 or more, display in è¬å…ƒ
                    return `${(roundedValue / 10000).toLocaleString('zh-TW', { maximumFractionDigits: 0 })} è¬å…ƒ`;
                } else { // Otherwise, display in å…ƒ
                    return `${roundedValue.toLocaleString('zh-TW')} å…ƒ`;
                }
            }

            // å°‡è¨ˆç®—çµæœé¡¯ç¤ºåœ¨é é¢ä¸Š
            resultDiv.innerHTML = `
                <p><strong class="text-blue-700">æŠ•è³‡æˆæœ¬(é ä¼°)ï¼š</strong> ${formatCurrencyForDisplay(totalInvestmentCost)}</p>
                <p><strong class="text-blue-700">æ¯æ—¥ç‡Ÿæ”¶(é ä¼°)ï¼š</strong> ${formatCurrencyForDisplay(initialTotalDailyNetRevenue)}</p>
                <p><strong class="text-blue-700">æ¯å¹´ç‡Ÿæ”¶(é ä¼° - ç¬¬ä¸€å¹´)ï¼š</strong> ${formatCurrencyForDisplay(initialTotalAnnualNetRevenue)}</p>
                <p><strong class="text-blue-700">ç‡Ÿé‹å¹´æœŸç¸½ç‡Ÿæ”¶(é ä¼°)ï¼š</strong> ${formatCurrencyForDisplay(totalProjectedRevenue)}</p>
                <p class="mt-4 text-sm text-gray-600">
                    â€» å‚™è¨»ï¼šæ­¤ç‚ºé ä¼°å€¼ï¼Œå¯¦éš›ç‡Ÿæ”¶æœƒå› ä½¿ç”¨ç‡ã€å…¶ä»–ç‡Ÿé‹æˆæœ¬ã€æŠ˜èˆŠç­‰å› ç´ å½±éŸ¿ã€‚
                    æœ¬è¨ˆç®—å‡è¨­æ¯è»Šæ ¼æ¯æ—¥å……é›»è»Šæ¬¡ç‚º <strong class="text-blue-700">${dailyVehicleCountPerSlot}</strong> æ¬¡ï¼Œ
                    æ¯æ¬¡å¹³å‡å……é›» <strong class="text-blue-700">${averageKWHPerVehicleCharge}</strong> åº¦ï¼Œ
                    å……é›»åŠŸç‡ç‚º <strong class="text-blue-700">${averagePowerConsumptionKW}</strong> kWã€‚
                    æ¯åº¦é›»è²»ç‡ <strong class="text-blue-700">${chargingRatePerKWH}</strong> NTDï¼Œå°é›»æˆæœ¬ <strong class="text-blue-700">${electricityCostPerKWH}</strong> NTDã€‚
                    é›»å‹•è»Šå……é›»å¹´å¢ç‡ç‚º <strong class="text-blue-700">${(annualGrowthRate * 100).toFixed(0)}</strong>%ã€‚
                    <br>
                    <span class="font-bold">é‡è¦æç¤ºï¼šä¾æ“šéå¾€åŠ ç›Ÿç¸¾æ•ˆé€²è¡Œé ä¼°ï¼Œä¸ä¿è­‰æ–¹æ¡ˆä¹‹æœ€ä½æ”¶ç›Šï¼Œäº¦ä¸ä»£è¡¨æœªä¾†ç¸¾æ•ˆä¹‹ä¿è­‰ã€‚</span>
                </p>
            `;
            resultDiv.classList.remove('hidden'); // é¡¯ç¤ºçµæœå€å¡Š

            chartContainer.classList.add('visible'); // Show chart container by adding 'visible' class
            // Defer chart drawing slightly to ensure canvas has rendered with dimensions
            console.log("Calling drawRevenueChart with delay...");
            setTimeout(() => {
                // Pass both cumulative and annual data for charting
                drawRevenueChart(annualRevenuesForChart, years, annualNetRevenuesPerYearForChart);
            }, 200); // Increased delay to 200ms

            // å¦‚æœæ˜¯ç®¡ç†å“¡æ¨¡å¼ï¼Œé¡¯ç¤ºè©³ç´°è¨ˆç®—å…¬å¼
            if (isAdmin) {
                document.getElementById('admin-electricity-cost').textContent = electricityCostPerKWH.toFixed(1);
                document.getElementById('admin-net-profit').textContent = netProfitPerKWH.toFixed(2);
                document.getElementById('admin-daily-kwh-per-slot').textContent = totalDailyKWHPerSlot.toFixed(0);
                document.getElementById('admin-daily-net-revenue-per-slot').textContent = dailyNetRevenuePerSlot.toFixed(2);
                document.getElementById('admin-total-daily-net-revenue').textContent = initialTotalDailyNetRevenue.toFixed(2);
                document.getElementById('admin-total-annual-net-revenue').textContent = initialTotalAnnualNetRevenue.toFixed(2);
                document.getElementById('admin-total-projected-revenue').textContent = totalProjectedRevenue.toFixed(2);
                document.getElementById('admin-total-investment-cost').textContent = totalInvestmentCost.toFixed(2);
                document.getElementById('admin-investment-formula').textContent = investmentFormulaText; // é¡¯ç¤ºæŠ•è³‡æˆæœ¬å…¬å¼
                adminDetailsSection.style.display = 'block'; // é¡¯ç¤ºç®¡ç†å“¡è©³æƒ…
            } else {
                adminDetailsSection.style.display = 'none'; // éç®¡ç†å“¡éš±è—
            }
        }

        /**
         * ç¹ªè£½ç‡Ÿæ”¶æˆé•·æŸ±ç‹€åœ–ã€‚
         * @param {Array<number>} cumulativeRevenues - æ¯å¹´ç´¯ç©çš„æ·¨ç‡Ÿæ”¶ (å–®ä½å…ƒ)ã€‚
         * @param {number} years - ç‡Ÿé‹å¹´æœŸã€‚
         * @param {Array<number>} annualNetRevenuesPerYear - æ¯å¹´æ·¨ç‡Ÿæ”¶çš„é™£åˆ— (å–®ä½å…ƒ)ã€‚
         */
        function drawRevenueChart(cumulativeRevenues, years, annualNetRevenuesPerYear) {
            console.log("drawRevenueChart started.");
            const canvas = document.getElementById('revenueChart');
            if (!canvas) {
                console.error("Canvas element 'revenueChart' not found.");
                return;
            }
            const ctx = canvas.getContext('2d');
            if (!ctx) {
                console.error("Failed to get 2D context for canvas.");
                return;
            }
            console.log("Canvas and context obtained. Drawing chart with data:", cumulativeRevenues, "years:", years, "annual data:", annualNetRevenuesPerYear);


            // å¦‚æœå·²æœ‰åœ–è¡¨å¯¦ä¾‹ï¼Œå…ˆéŠ·æ¯€å®ƒ
            if (revenueChartInstance) {
                revenueChartInstance.destroy();
                console.log("Existing chart instance destroyed.");
            }

            const labels = [];
            const annualRevenueDataForChart = annualNetRevenuesPerYear.map(val => Math.round(val / 10000)); // Convert annual revenue to è¬å…ƒ and round
            
            for (let i = 1; i <= years; i++) {
                labels.push(`ç¬¬ ${i} å¹´`);
            }

            revenueChartInstance = new Chart(ctx, {
                type: 'bar', // æŸ±ç‹€åœ–
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ç´¯ç©æ·¨ç‡Ÿæ”¶ (è¬å…ƒ)',
                        data: cumulativeRevenues.map(val => Math.round(val / 10000)), // Convert cumulative to è¬å…ƒ and round
                        backgroundColor: 'rgba(52, 211, 153, 0.8)', // Emerald green for bars
                        borderColor: 'rgba(52, 211, 153, 1)',
                        borderWidth: 1,
                        borderRadius: 5, // Rounded corners for bars
                    },
                    {
                        type: 'line', // Line chart for annual revenue
                        label: 'æ¯å¹´æ·¨ç‡Ÿæ”¶è¶¨å‹¢ (è¬å…ƒ)', // Updated label for clarity
                        data: annualRevenueDataForChart,
                        borderColor: 'rgba(6, 182, 212, 1)', // Cyan for annual line
                        backgroundColor: 'rgba(6, 182, 212, 0.2)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.1, // Smooth the line
                        pointRadius: 5, // Show points on the line
                        pointHoverRadius: 7,
                        datalabels: {
                            display: false // Disable datalabels on the line itself
                        }
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'ç‡Ÿæ”¶æˆé•·(é ä¼°)', // Updated title
                            color: '#e2e8f0', // Gray-200 for title
                            font: {
                                size: 18,
                                weight: 'bold'
                            }
                        },
                        legend: {
                            labels: {
                                color: '#cbd5e1', // Slate-300 for legend text
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        // Format to integer and add è¬å…ƒ
                                        label += `${Math.round(context.parsed.y).toLocaleString('zh-TW')} è¬å…ƒ`;
                                    }
                                    return label;
                                }
                            }
                        },
                        datalabels: { // Global datalabels configuration (for bars, if any)
                            display: false, // Disable datalabels for bars by default
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'ç‡Ÿé‹å¹´æœŸ',
                                color: '#94a3b8', // Slate-400
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)', // Lighter grid lines
                            },
                            ticks: {
                                color: '#cbd5e1', // Slate-300 for x-axis labels
                                callback: function(value, index, ticks) {
                                    const yearLabel = `ç¬¬ ${index + 1} å¹´`;
                                    // Ensure annualNetRevenue is in è¬å…ƒ and rounded for display
                                    const annualValueWan = annualRevenueDataForChart[index]; // Use the already converted annual data
                                    return [yearLabel, `${annualValueWan.toLocaleString('zh-TW')} è¬å…ƒ`];
                                },
                                autoSkip: false, // Prevent ticks from being skipped
                                maxRotation: 0, // Prevent rotation
                                minRotation: 0,
                                padding: 10 // Add padding between labels and the axis line
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'é‡‘é¡ (è¬å…ƒ)', // Updated Y-axis title
                                color: '#94a3b8', // Slate-400
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)', // Lighter grid lines
                            },
                            ticks: {
                                color: '#cbd5e1', // Slate-300 for y-axis labels
                                callback: function(value) {
                                    // Format to integer for y-axis ticks
                                    return Math.round(value).toLocaleString('zh-TW');
                                }
                            }
                        }
                    }
                }
            });
            console.log("Chart instance created.");
        }

        /**
         * è™•ç†ç®¡ç†å“¡ç™»å…¥ã€‚
         * å¦‚æœå¯†ç¢¼æ­£ç¢ºï¼Œå‰‡å•Ÿç”¨ç®¡ç†å“¡æ¨¡å¼ä¸¦é¡¯ç¤ºè©³ç´°è¨ˆç®—å€å¡Šã€‚
         */
        window.loginAdmin = function() { // Made global
            console.log("loginAdmin called.");
            const pass = document.getElementById("adminPass").value;
            const loginStatus = document.getElementById("login-status");
            const adminDetailsSection = document.getElementById('admin-details-section');
            const resultDiv = document.getElementById('calc-result'); // Get result div
            const chartContainer = document.getElementById('chart-container'); // Get chart container

            if (pass === "1688") { // ç®¡ç†å¯†ç¢¼
                isAdmin = true;
                loginStatus.textContent = "âœ… å·²æˆåŠŸç™»å…¥ç®¡ç†å“¡æ¨¡å¼";
                loginStatus.classList.remove('text-red-600');
                loginStatus.classList.add('text-green-600');
                // ç™»å…¥å¾Œç«‹å³æ›´æ–°è¨ˆç®—çµæœï¼Œä»¥é¡¯ç¤ºç®¡ç†å“¡è©³ç´°ä¿¡æ¯
                calculateRevenue(); // ä½¿ç”¨æ›´æ–°å¾Œçš„ calculateRevenue å‡½æ•¸
                setAdminInputStates(); // æ›´æ–°è¼¸å…¥æ¬„ä½ç‹€æ…‹
                adminDetailsSection.style.display = 'block'; // ç¢ºä¿ç®¡ç†å“¡å€å¡Šåœ¨ç™»å…¥æ™‚å¯è¦‹
                console.log("Admin login successful.");
            } else {
                isAdmin = false;
                loginStatus.textContent = "âŒ å¯†ç¢¼éŒ¯èª¤";
                loginStatus.classList.remove('text-green-600');
                loginStatus.classList.add('text-red-600');
                adminDetailsSection.style.display = 'none'; // å¯†ç¢¼éŒ¯èª¤æ™‚éš±è—ç®¡ç†å“¡è©³æƒ…
                resultDiv.classList.add('hidden'); // å¯†ç¢¼éŒ¯èª¤æ™‚éš±è—çµæœå€å¡Š
                chartContainer.classList.remove('visible'); // å¯†ç¢¼éŒ¯èª¤æ™‚éš±è—åœ–è¡¨
                setAdminInputStates(); // æ›´æ–°è¼¸å…¥æ¬„ä½ç‹€æ…‹
                console.log("Admin login failed.");
            }
        }

        /**
         * æ ¹æ“šå……é›»åŠŸç‡çš„é¸æ“‡æ›´æ–°æ¯åº¦é›»è²»ç‡çš„è¼¸å…¥ç‹€æ…‹å’Œå€¼ã€‚
         * å¦‚æœå……é›»åŠŸç‡æ˜¯7kWï¼Œå‰‡è¨­å®šè²»ç‡ç‚º8å…ƒä¸¦ç¦ç”¨è¼¸å…¥ï¼›
         * å¦å‰‡ï¼Œå•Ÿç”¨è¼¸å…¥ã€‚
         */
        function updateChargingRateBasedOnPower() {
            const powerConsumptionSelect = document.getElementById('calc-powerConsumption');
            const chargingRateInput = document.getElementById('calc-chargingRate');
            
            const selectedPower = parseFloat(powerConsumptionSelect.value);
            if (selectedPower === 7) {
                chargingRateInput.value = 8;
                chargingRateInput.disabled = true; // Always disabled for 7kW, even for admin
                chargingRateInput.classList.add('bg-gray-200'); // å¢åŠ ç¦ç”¨æ™‚çš„è¦–è¦ºæ•ˆæœ
                chargingRateInput.classList.remove('focus:ring-blue-500');
            } else {
                chargingRateInput.disabled = !isAdmin; // Disabled if not admin
                if (isAdmin) {
                    chargingRateInput.classList.remove('bg-gray-200');
                    chargingRateInput.classList.add('focus:ring-blue-500');
                } else {
                    chargingRateInput.classList.add('bg-gray-200');
                    chargingRateInput.classList.remove('focus:ring-blue-500');
                }
            }
            // Do NOT call calculateRevenue here to avoid double-triggers from other updates,
            // calculateRevenue will be called by the main DOMContentLoaded or other input changes.
        }

        /**
         * æ ¹æ“šå……é›»åŠŸç‡çš„é¸æ“‡æ›´æ–°æ¯æ—¥è»Šæ¬¡/æ ¼çš„è¼¸å…¥ç‹€æ…‹å’Œå€¼ã€‚
         * å¦‚æœå……é›»åŠŸç‡æ˜¯7kWï¼Œå‰‡è¨­å®šç‚º1ä¸¦ç¦ç”¨è¼¸å…¥ï¼›
         * å¦å‰‡ï¼Œå•Ÿç”¨è¼¸å…¥ä¸¦è¨­å®šç‚ºé è¨­å€¼5ã€‚
         */
        function updateDailyVehicleCountBasedOnPower() {
            const powerConsumptionSelect = document.getElementById('calc-powerConsumption');
            const dailyVehicleCountPerSlotInput = document.getElementById('calc-dailyVehicleCountPerSlot');

            const selectedPower = parseFloat(powerConsumptionSelect.value);
            if (selectedPower === 7) { // åªæœ‰ç•¶å……é›»åŠŸç‡æ˜¯7kWæ™‚å›ºå®šç‚º1è»Š
                dailyVehicleCountPerSlotInput.value = 1;
                dailyVehicleCountPerSlotInput.disabled = true; // Always disabled for 7kW, even for admin
                dailyVehicleCountPerSlotInput.classList.add('bg-gray-200');
                dailyVehicleCountPerSlotInput.classList.remove('focus:ring-blue-500');
            } else {
                dailyVehicleCountPerSlotInput.disabled = !isAdmin; // Disabled if not admin
                if (dailyVehicleCountPerSlotInput.disabled && dailyVehicleCountPerSlotInput.value == 1) { // If it was fixed to 1 due to 7KW, reset it
                   dailyVehicleCountPerSlotInput.value = 5; // Restore initial default value
                }
                if (isAdmin) {
                    dailyVehicleCountPerSlotInput.classList.remove('bg-gray-200');
                    dailyVehicleCountPerSlotInput.classList.add('focus:ring-blue-500');
                } else {
                    dailyVehicleCountPerSlotInput.classList.add('bg-gray-200');
                    dailyVehicleCountPerSlotInput.classList.remove('focus:ring-blue-500');
                }
            }
            // Do NOT call calculateRevenue here
        }

        /**
         * æ ¹æ“šå……é›»åŠŸç‡çš„é¸æ“‡æ›´æ–°è»Šæ ¼æ•¸çš„æœ€å°å€¼å’Œé è¨­å€¼ï¼Œä¸¦å¼·åˆ¶ç‚ºå¶æ•¸ï¼ˆè‹¥åŠŸç‡å¤§æ–¼30kWï¼‰ã€‚
         * 30kW ä»¥ä¸Šçš„åŠŸç‡ä¸€å®šæ˜¯ä»¥2æ ¼ç‚ºåŸºç¤ï¼Œä¸æœƒæœ‰å–®æ ¼æ•¸ï¼Œä¸”å¿…é ˆæ˜¯å¶æ•¸ã€‚
         * 30kW è·Ÿ 7kW å¯ä»¥å–®æ ¼æ•¸ã€‚
         */
        function updateSlotsMinAndValue() {
            const powerConsumptionSelect = document.getElementById('calc-powerConsumption');
            const slotsInput = document.getElementById('calc-slots');
            
            const selectedPower = parseFloat(powerConsumptionSelect.value);
            let currentSlots = parseInt(slotsInput.value);

            if (selectedPower > 30) { // 120kW, 180kW, 360kW
                slotsInput.min = 2; // è‡³å°‘2æ ¼
                slotsInput.step = 2; // åªèƒ½ä»¥2ç‚ºæ­¥é€²

                // å¦‚æœç•¶å‰å€¼å°æ–¼2æˆ–ç‚ºå¥‡æ•¸ï¼Œå‰‡é‡è¨­ç‚º2
                if (currentSlots < 2 || currentSlots % 2 !== 0) {
                    slotsInput.value = 2;
                }
            } else { // 7kW, 30kW
                slotsInput.min = 1; // å¯ä»¥æ˜¯1æ ¼
                slotsInput.step = 1; // å¯ä»¥ä»¥1ç‚ºæ­¥é€²
            }
            // Do NOT call calculateRevenue here
        }


        // JavaScript for scroll animation effect (Unchanged from previous versions)
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('.animate-on-scroll');

            const observerOptions = {
                root: null, // Observe the entire viewport
                rootMargin: '0px',
                threshold: 0.1 // Trigger when 10% of the element is visible
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        const subItems = entry.target.querySelectorAll('.bento-item');
                        subItems.forEach((item, index) => {
                            setTimeout(() => {
                                item.classList.add('is-visible');
                            }, index * 200);
                        });
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });

            // Interactive collapsible/expandable function (Accordion) (Unchanged from previous versions)
            const collapsibleHeaders = document.querySelectorAll('.collapsible-header');

            collapsibleHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('.icon');

                    header.classList.toggle('expanded');
                    content.classList.toggle('expanded');

                    if (content.classList.contains('expanded')) {
                        content.style.maxHeight = content.scrollHeight + "px";
                    } else {
                        content.style.maxHeight = "0";
                    }
                });
            });

            // JavaScript for number animation (e.g., 1,700è¬ and 9.8è¬) (Unchanged from previous versions)
            function animateNumber(element, targetValue, unit, duration) {
                let startTimestamp = null;
                const startValue = parseFloat(element.querySelector('.current-value').textContent || '0');
                const difference = targetValue - startValue;
                const currentValueSpan = element.querySelector('.current-value');
                const isInteger = Number.isInteger(targetValue);

                function step(timestamp) {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const easedProgress = 0.5 - Math.cos(progress * Math.PI) / 2;

                    let currentValue = startValue + (easedProgress * difference);

                    if (isInteger) {
                        currentValueSpan.textContent = Math.round(currentValue).toLocaleString('en-US');
                    } else {
                        const decimalPlaces = (targetValue.toString().split('.')[1] || '').length;
                        currentValueSpan.textContent = currentValue.toFixed(decimalPlaces);
                    }
                    
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    } else {
                        if (isInteger) {
                            currentValueSpan.textContent = targetValue.toLocaleString('en-US');
                        } else {
                            currentValueSpan.textContent = targetValue.toFixed((targetValue.toString().split('.')[1] || '').length);
                        }
                    }
                }
                window.requestAnimationFrame(step);
            }

            // Observe elements with the 'animated-number' class
            const animatedNumberElements = document.querySelectorAll('.animated-number');

            const numberObserverOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.5
            };

            const numberObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const element = entry.target;
                        const targetValue = parseFloat(element.dataset.targetValue);
                        const unit = element.dataset.unit;
                        const duration = 2000;

                        animateNumber(element, targetValue, unit, duration);
                    }
                });
            }, numberObserverOptions);

            animatedNumberElements.forEach(element => {
                numberObserver.observe(element);
            });

            // JavaScript for charging pile equipment diagrams (Unchanged from previous versions)
            const chargerTypeSelect = document.getElementById('charger-type');
            const chargerImage = document.getElementById('charger-image');

            const chargerImages = {
                '7kW': 'https://i.meee.com.tw/lImWom7.jpg',
                '30kW': 'https://i.meee.com.tw/lj9DcGE.jpg',
                '120kW': 'https://i.meee.com.tw/rzyjIOr.jpg',
                '180kW': 'https://i.meee.com.tw/PszN4JT.jpg',
                '360kW': 'https://i.meee.com.tw/5mffjMZ.jpg'
            };

            chargerImage.src = chargerImages['7kW'];
            chargerImage.alt = '7kW å……é›»æ¨è¨­å‚™åœ–';

            chargerTypeSelect.addEventListener('change', (event) => {
                const selectedValue = event.target.value;
                chargerImage.src = chargerImages[selectedValue];
                chargerImage.alt = `${selectedValue} å……é›»æ¨è¨­å‚™åœ–`;
            });


            // Calculator specific event listeners and initial setup
            const calcPowerConsumptionSelect = document.getElementById('calc-powerConsumption');
            const calcSlotsInput = document.getElementById('calc-slots');
            const calcYearsInput = document.getElementById('calc-years');
            const calcDailyVehicleCountPerSlotInput = document.getElementById('calc-dailyVehicleCountPerSlot');
            const calcAverageKWHPerVehicleChargeInput = document.getElementById('calc-averageKWHPerVehicleCharge');
            const calcChargingRateInput = document.getElementById('calc-chargingRate');
            const calcElectricityCostInput = document.getElementById('calc-electricityCost');
            const calcAnnualGrowthRateInput = document.getElementById('calc-annualGrowthRate'); // æ–°å¢å¹´å¢ç‡ input
            const calcInvestmentCostPerKWInput = document.getElementById('calc-investmentCostPerKW');
            const adminPassInput = document.getElementById('adminPass');

            // Function to hide results and chart when key public inputs change
            function hideCalculatorResults() {
                document.getElementById('calc-result').classList.add('hidden');
                document.getElementById('chart-container').classList.remove('visible'); // Hide chart using 'visible' class
                if (!isAdmin) { // Only hide admin section if not logged in
                    document.getElementById('admin-details-section').style.display = 'none';
                }
            }

            // Attach event listeners to power, slots, and years inputs for updating dependent fields AND hiding results
            calcPowerConsumptionSelect.addEventListener('change', () => {
                updateChargingRateBasedOnPower();
                updateDailyVehicleCountBasedOnPower();
                updateSlotsMinAndValue();
                hideCalculatorResults(); // Hide results immediately
            });

            calcSlotsInput.addEventListener('input', () => {
                const selectedPower = parseFloat(calcPowerConsumptionSelect.value);
                let currentSlots = parseInt(calcSlotsInput.value);

                if (selectedPower > 30) {
                    if (currentSlots % 2 !== 0) {
                        calcSlotsInput.value = Math.max(calcSlotsInput.min, currentSlots - 1);
                        if (currentSlots === 1) calcSlotsInput.value = 2;
                    }
                }
                hideCalculatorResults(); // Hide results immediately
            });

            calcYearsInput.addEventListener('change', hideCalculatorResults); // Hide results immediately
            calcYearsInput.addEventListener('input', hideCalculatorResults); // Hide results immediately
            calcYearsInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    hideCalculatorResults(); // Hide results immediately
                }
            });
            
            // Attach event listeners to admin-controlled inputs for updating dependent fields only
            const adminControlledInputs = [
                calcDailyVehicleCountPerSlotInput,
                calcAverageKWHPerVehicleChargeInput,
                calcChargingRateInput,
                calcElectricityCostInput,
                calcAnnualGrowthRateInput, // Add new input to event listeners
                calcInvestmentCostPerKWInput
            ];

            adminControlledInputs.forEach(input => {
                input.addEventListener('change', () => {
                    // No calculateRevenue() here, only update dependent states if needed
                    // Results will be hidden by the main button click or public input changes
                });
                input.addEventListener('blur', () => {
                    // No calculateRevenue() here
                });
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        // No calculateRevenue() here
                        e.preventDefault();
                    }
                });
            });


            // Listener for admin password input
            adminPassInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    loginAdmin();
                    e.preventDefault();
                }
            });

            // Initial setup for input states and calculation
            loadAdminParameters(); // Load saved parameters first
            updateChargingRateBasedOnPower(); // Set initial state for charging rate based on loaded power
            updateDailyVehicleCountBasedOnPower(); // Set initial state for daily vehicle count based on loaded power
            updateSlotsMinAndValue(); // Set initial state for slots based on loaded power
            setAdminInputStates(); // Set initial disabled states for admin inputs
            // Initially hide the results and admin section until calculation button is pressed or admin logs in
            hideCalculatorResults(); 
        });
    </script>
</body>
</html>
